<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Employee Directory Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body {
      background-color: #f1f3f6;
      font-family: 'Times New Roman', Times, serif;
    }
    .card {
      border-radius: 12px;
      box-shadow: 0px 3px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
      background-color: lightblue;
    }
    .card:hover {
      transform: scale(1.03);
      background-color: white;
    }
    .navbar-brand {
      font-weight: bold;
    }
    .profile-img {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>


  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Employee Directory Dashboard</a>
      <div>
        <a href="addemp.html" class="btn btn-light btn-sm">‚ûï Add Employee</a>
      </div>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="row text-center mb-4 g-3">
      <div class="col">
        <div class="card text-bg-info">
          <div class="card-body">
            <h6>Total Employees</h6>
            <h3 id="totalCount">0</h3>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card text-bg-success">
          <div class="card-body">
            <h6>HR Department</h6>
            <h3 id="hrCount">0</h3>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card text-bg-warning">
          <div class="card-body">
            <h6>IT Department</h6>
            <h3 id="itCount">0</h3>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="card text-bg-secondary">
          <div class="card-body">
            <h6>Finance Department</h6>
            <h3 id="financeCount">0</h3>
          </div>
        </div>
      </div>
       <div class="col">
        <div class="card text-bg-primary">
          <div class="card-body">
            <h6>Admin Department</h6>
            <h3 id="adminCount">0</h3>
          </div>
        </div>
      </div>
    </div>

    <!-- Search & Filter -->
    <div class="row mb-3">
      <div class="col-md-6 mb-2">
        <input type="text" id="searchInput" class="form-control" placeholder="Search by name..." />
      </div>
      <div class="col-md-6">
        <select id="filterDept" class="form-select">
          <option value="">Filter by Department</option>
          <option value="HR">HR</option>
          <option value="IT">IT</option>
          <option value="Finance">Finance</option>
          <option value="Admin">Admin</option>
        </select>
      </div>
    </div>

   
    <div class="row" id="employeeCards"></div>
  </div>


  <script>
    function displayEmployees() {
      const employees = JSON.parse(localStorage.getItem("employees")) || [];
      const search = document.getElementById("searchInput").value.toLowerCase();
      const filterDept = document.getElementById("filterDept").value;
      const container = document.getElementById("employeeCards");

     
      container.innerHTML = "";

    
      const filtered = employees.filter(emp =>
        emp.name.toLowerCase().includes(search) &&
        (filterDept === "" || emp.department === filterDept)
      );

    
      document.getElementById("totalCount").innerText = employees.length;
      document.getElementById("hrCount").innerText = employees.filter(e => e.department === "HR").length;
      document.getElementById("itCount").innerText = employees.filter(e => e.department === "IT").length;
      document.getElementById("financeCount").innerText = employees.filter(e => e.department === "Finance").length;
      document.getElementById("adminCount").innerText = employees.filter(e => e.department === "Admin").length;

    
      if (filtered.length === 0) {
        container.innerHTML = "<p class='text-center text-muted mt-4'>No employees found.</p>";
        return;
      }

     
      filtered.forEach((emp, index) => {
        container.innerHTML += `
          <div class="col-md-4 mb-4">
            <div class="card p-3 text-center">
         
              <h5>${emp.name}</h5>
              <p class="mb-1"><strong>Dept:</strong> ${emp.department}</p>
              <p class="mb-1"><strong>Email:</strong> ${emp.email}</p>
              <p class="mb-1"><strong>Phone:</strong> ${emp.phone}</p>
              <p class="mb-2"><strong>Designation:</strong> ${emp.designation}</p>
              <small class="text-muted">Joined on ${emp.date}</small>
              <div class="mt-3 d-flex justify-content-center gap-2">
                <button class="btn btn-warning btn-sm" onclick="editEmployee(${index})">‚úèÔ∏è Edit</button>
                <button class="btn btn-danger btn-sm" onclick="deleteEmployee(${index})">üóëÔ∏è Delete</button>
              </div>
            </div>
          </div>
        `;
      });
    } 

   // Edit Employee  
     function editEmployee(index) {
      localStorage.setItem("editIndex", index);
      window.location.href = "editemp.html";
    }

    // Delete Employee
    function deleteEmployee(index) {
      if (confirm("Are you sure you want to delete this employee?")) {
        let employees = JSON.parse(localStorage.getItem("employees")) || [];
        employees.splice(index, 1);
        localStorage.setItem("employees", JSON.stringify(employees));
        displayEmployees();
      }
    }

   
    document.getElementById("searchInput").addEventListener("input", displayEmployees);
    document.getElementById("filterDept").addEventListener("change", displayEmployees);

    window.onload = displayEmployees;
  </script>
</body>
</html>
